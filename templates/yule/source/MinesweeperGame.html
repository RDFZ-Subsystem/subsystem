<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minesweeper Game</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/yule/minesweeper.css') }}">
    <link href="{{ url_for('static', filename='css/white_theme_yule.css') }}" rel="stylesheet">
    {% if t_theme == 'black' %}
    <link href="{{ url_for('static', filename='css/black_theme.css') }}" rel="stylesheet">
    {% endif %}
    <style>
        .title {
            position: fixed;
        }
    </style>
</head>
<body>
    <div class="title">
        Yule - Subsystem
        <a href="/"> Home </a>
        |
        <a href="/reciter"> Reciter </a>
        |
        <a href="/forum"> Forum </a>
        |
        <a href="/yule"> Yule </a>
        |
        <a href="/userlist"> Users </a>
        |
        {% if t_username == None %}
            <a href="/login"> Login </a>
        {% endif %}
        {% if t_username != None %}
            <a href="/login"> Switch Account </a>
        |
            <a href="/profile?username={{ t_username }}"> {{ t_username }} </a>
        {% endif %}
        <br>
    </div>
    <button id="homeButton" onclick="window.location.href='{{ t_home }}'">Home Page</button>
    <div class="game-header">
        <div class="counter">Mines Left: <span id="minesLeft">230</span></div>
        <h1>Minesweeper Game</h1>
        <div class="counter">Time: <span id="timeElapsed">0</span>s</div>
    </div>
    <div id="game"></div>
    <div id="message"></div>
    <button id="resetButton">Restart</button>
    <button id="settingsButton">⚙️</button>
    <button id="helpButton">❓</button>
    <div class="settings-modal" id="settingsModal">
        <div class="settings-content">
            <div class="settings-title">choose difficulty</div>
            <button class="difficulty-button" data-size="9,9,10">Beginning(9 x 9 10 mines)</button>
            <button class="difficulty-button" data-size="16,16,40">Midium(16 x 16 40 mines)</button>
            <button class="difficulty-button" data-size="16,30,99">Advanced(16 x 30 99 mines)</button>
            <button class="difficulty-button" data-size="25,50,230">Hell(25 x 50 230 mines)</button>
            
            <div class="settings-section">
                <div class="section-title">Game Mode</div>
                <div class="mode-toggle">
                    <button class="mode-button active" data-mode="normal">Normal Mode</button>
                    <button class="mode-button" data-mode="noguess">No Guess Mode</button>
                </div>
            </div>
        </div>
    </div>
    <div class="help-modal" id="helpModal">
        <div class="help-content">
            <h2>How to Play Minesweeper</h2>
            <div class="rules-section">
                <h3>Basic Rules:</h3>
                <ul>
                    <li>The goal is to reveal all safe squares without triggering any mines.</li>
                    <li>Numbers show how many mines are adjacent to that square.</li>
                    <li>Use these numbers to deduce where the mines are.</li>
                </ul>
                
                <h3>Controls:</h3>
                <ul>
                    <li><strong>Left Click:</strong> Reveal a square</li>
                    <li><strong>Right Click:</strong> Flag/unflag a suspected mine</li>
                    <li><strong>Left Click on revealed number:</strong> Quick reveal adjacent squares if correct flags are placed</li>
                </ul>

                <h3>Game Modes:</h3>
                <ul>
                    <li><strong>Normal Mode:</strong> Traditional minesweeper gameplay</li>
                    <li><strong>No Guess Mode:</strong> Every move can be logically deduced</li>
                </ul>
            </div>
            <p class="click-to-continue">Click anywhere to continue</p>
        </div>
    </div>
    <div class="copy">
        Developed by <a href="https://github.com/YCY5449">YCY5449</a>. <br>
        2024 - 2025, &copy Subsystem Dev Team<br>
        All rights reserved.
    </div>
    <script src="{{ url_for('static', filename='javascript/yule/minesweeper.js') }}"></script>
</body>
</html>